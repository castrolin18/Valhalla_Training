const productos = [
  {
  idProducto: "F78K9mnbG654", // ID válido
  nombreProducto: "Camiseta de fútbol",
  selectorCategoria: "futbol",
  imagen: "/src/img/1.jpg",
  precio: 65000,
  color: "Azul marino",
  grantia: "1 año",
  material: "Poliéster transpirable"
},

// Objeto 2
  {
  idProducto: "B4ytg765K987", // ID válido
  nombreProducto: "Zapatillas de baloncesto",
  selectorCategoria: "baloncesto",
  imagen: "/src/img/2.jpg",
  precio: 150000,
  color: "Blanco y negro",
  grantia: "6 meses",
  material: "Cuero sintético y goma"
},

// Objeto 3
  {
  idProducto: "T98y7t65r4321", // ID válido
  nombreProducto: "Raqueta de tenis profesional",
  selectorCategoria: "tennis",
  imagen: "/src/img/3.jpg",
  precio: 280000,
  color: "Negro y amarillo",
  grantia: "2 años",
  material: "Grafito y carbono"
},

// Objeto 4
{
  idProducto: "H8y7t65r4321", // ID válido
  nombreProducto: "Balón de voleibol playa",
  selectorCategoria: "voley",
  imagen: "/src/img/4.jpg",
  precio: 35000,
  color: "Naranja y azul",
  grantia: "1 año",
  material: "Cuero sintético y goma"
},

// Objeto 5
{
  idProducto: "J78K9mnbG654", // ID válido
  nombreProducto: "Mancuernas de gimnasio",
  selectorCategoria: "gym",
  imagen: "/src/img/5.jpg",
  precio: 80000,
  color: "Negro",
  grantia: "1 año",
  material: "Hierro fundido"
},

// Objeto 6
{
  idProducto: "A78K9mnbG654", // ID válido
  nombreProducto: "Bicicleta de montaña para niños",
  selectorCategoria: "ciclismo",
  imagen: "/src/img/6.jpg",
  precio: 135000,
  color: "Azul y verde",
  grantia: "2 años",
  material: "Aluminio"
},

// Objeto 7
{
  idProducto: "S78K9mnbG654", // ID válido
  nombreProducto: "Patines en línea para adultos",
  selectorCategoria: "patinaje",
  imagen: "/src/img/7.jpg",
  precio: 110000,
  color: "Negro y rojo",
  grantia: "1 año",
  material: "Polipropileno y aluminio"
},

// Objeto 8
{
  idProducto: "D78K9mnbG654", // ID válido
  nombreProducto: "Casco de bicicleta con luces",
  selectorCategoria: "ciclismo",
  imagen: "/src/img/6.jpg",
  precio: 75000,
  color: "Blanco y negro",
  grantia: "2 años",
  material: "ABS y policarbonato"
},

// Objeto 9
{
  idProducto: "F78K9mnbG654", // ID válido
  nombreProducto: "Raqueta de bádminton",
  selectorCategoria: "badminton",
  imagen: "/src/img/8.jpg",
  precio: 50000,
  color: "Naranja y amarillo",
  grantia: "1 año",
  material: "Grafito y aluminio"
},// Objeto 10
{
  idProducto: "G78K9mnbG654",
  nombreProducto: "Red de fútbol",
  selectorCategoria: "futbol",
  imagen: "/src/img/1.jpg",
  precio: 45000,
  color: "Blanco",
  grantia: "1 año",
  material: "Nylon resistente"
},
// Objeto 11
{
  idProducto: "K78K9mnbG654",
  nombreProducto: "Canasta de baloncesto portátil",
  selectorCategoria: "baloncesto",
  imagen: "/src/img/2.jpg",
  precio: 120000,
  color: "Rojo y negro",
  grantia: "2 años",
  material: "Acero galvanizado"
},
// Objeto 12
{
  idProducto: "L78K9mnbG654",
  nombreProducto: "Pelotas de tenis",
  selectorCategoria: "tennis",
  imagen: "/src/img/3.jpg",
  precio: 5000,
  color: "Amarillo",
  grantia: "6 meses",
  material: "Goma vulcanizada"
},
// Objeto 13
{
  idProducto: "M78K9mnbG654",
  nombreProducto: "Red de voleibol indoor",
  selectorCategoria: "voley",
  imagen: "/src/img/4.jpg",
  precio: 60000,
  color: "Blanco",
  grantia: "1 año",
  material: "Polietileno resistente"
},
// Objeto 14
{
  idProducto: "N78K9mnbG654",
  nombreProducto: "Pesas para tobillos",
  selectorCategoria: "gym",
  imagen: "/src/img/5.jpg",
  precio: 35000,
  color: "Negro",
  grantia: "1 año",
  material: "Neopreno y hierro"
},
// Objeto 15
{
  idProducto: "O78K9mnbG654",
  nombreProducto: "Cascos para patinaje",
  selectorCategoria: "patinaje",
  imagen: "/src/img/7.jpg",
  precio: 85000,
  color: "Azul y blanco",
  grantia: "2 años",
  material: "Policarbonato y espuma EPS"
},
// Objeto 16
{
  idProducto: "P78K9mnbG654",
  nombreProducto: "Guantes para ciclismo",
  selectorCategoria: "ciclismo",
  imagen: "/src/img/6.jpg",
  precio: 25000,
  color: "Negro y rojo",
  grantia: "1 año",
  material: "Spandex y microfibra"
},
// Objeto 17
{
  idProducto: "Q78K9mnbG654",
  nombreProducto: "Volantes de bádminton",
  selectorCategoria: "badminton",
  imagen: "/src/img/8.jpg",
  precio: 2000,
  color: "Blanco",
  grantia: "6 meses",
  material: "Plástico y corcho"
},
// Objeto 18
{
  idProducto: "R78K9mnbG654",
  nombreProducto: "Tablas de surf",
  selectorCategoria: "surf",
  imagen: "/src/img/9.jpg",
  precio: 300000,
  color: "Varios",
  grantia: "2 años",
  material: "Espuma de poliuretano y fibra de vidrio"
},
// Objeto 19
{
  idProducto: "S78K9mnbG654",
  nombreProducto: "Bolsa de deporte",
  selectorCategoria: "accesorios",
  imagen: "/src/img/9.jpg",
  precio: 40000,
  color: "Negro",
  grantia: "1 año",
  material: "Poliéster resistente"
},
{
  idProducto: "T78K9mnbG654",
  nombreProducto: "Gorra de tenis",
  selectorCategoria: "tennis",
  imagen: "/src/img/3.jpg",
  precio: 25000,
  color: "Blanco",
  grantia: "6 meses",
  material: "Algodón y poliéster"
},
// Objeto 21
{
  idProducto: "U78K9mnbG654",
  nombreProducto: "Pelota de rugby",
  selectorCategoria: "rugby",
  imagen: "/src/img/10.jpg",
  precio: 30000,
  color: "Rojo y negro",
  grantia: "1 año",
  material: "Caucho vulcanizado"
},
// Objeto 22
{
  idProducto: "V78K9mnbG654",
  nombreProducto: "Soga de entrenamiento",
  selectorCategoria: "gym",
  imagen: "/src/img/5.jpg",
  precio: 15000,
  color: "Negro",
  grantia: "1 año",
  material: "Nylon resistente"
},
// Objeto 23
{
  idProducto: "W78K9mnbG654",
  nombreProducto: "Guantes de boxeo",
  selectorCategoria: "boxeo",
  imagen: "/src/img/10.jpg",
  precio: 50000,
  color: "Negro",
  grantia: "1 año",
  material: "Cuero sintético y espuma"
},
// Objeto 24
{
  idProducto: "X78K9mnbG654",
  nombreProducto: "Máscara de snorkel",
  selectorCategoria: "natacion",
  imagen: "/src/img/10.jpg",
  precio: 40000,
  color: "Azul y transparente",
  grantia: "2 años",
  material: "Silicona y cristal templado"
},
// Objeto 25
{
  idProducto: "Y78K9mnbG654",
  nombreProducto: "Red de bádminton",
  selectorCategoria: "badminton",
  imagen: "/src/img/8.jpg",
  precio: 20000,
  color: "Blanco",
  grantia: "1 año",
  material: "Nylon resistente"
},
// Objeto 26
{
  idProducto: "Z78K9mnbG654",
  nombreProducto: "Balón medicinal",
  selectorCategoria: "gym",
  imagen: "/src/img/5.jpg",
  precio: 40000,
  color: "Negro",
  grantia: "1 año",
  material: "Piel sintética y relleno de arena"
},
// Objeto 27
{
  idProducto: "A78K9mnbG654",
  nombreProducto: "Máscara de buceo",
  selectorCategoria: "buceo",
  imagen: "/src/img/10.jpg",
  precio: 70000,
  color: "Negro y amarillo",
  grantia: "2 años",
  material: "Silicona y policarbonato"
},
// Objeto 28
{
  idProducto: "B78K9mnbG654",
  nombreProducto: "Cuerda para saltar",
  selectorCategoria: "gym",
  imagen: "/src/img/5.jpg",
  precio: 10000,
  color: "Negro y verde",
  grantia: "1 año",
  material: "Cuerda de nylon y mangos de espuma"
},
// Objeto 29
{
  idProducto: "C78K9mnbG654",
  nombreProducto: "Set de tenis de mesa",
  selectorCategoria: "pingpong",
  imagen: "/src/img/10.jpg",
  precio: 80000,
  color: "Azul y blanco",
  grantia: "1 año",
  material: "Madera y goma"
},
{
  idProducto: "D78K9mnbG654",
  nombreProducto: "Bolsa de boxeo",
  selectorCategoria: "boxeo",
  imagen: "/src/img/10.jpg",
  precio: 75000,
  color: "Negro",
  grantia: "1 año",
  material: "Cuero sintético y relleno de tela"
},
// Objeto 31
{
  idProducto: "E78K9mnbG654",
  nombreProducto: "Gafas de natación",
  selectorCategoria: "natacion",
  imagen: "/src/img/10.jpg",
  precio: 25000,
  color: "Azul y negro",
  grantia: "6 meses",
  material: "Silicona y policarbonato"
},
// Objeto 32
{
  idProducto: "F78K9mnbG654",
  nombreProducto: "Pantalones cortos de running",
  selectorCategoria: "running",
  imagen: "/src/img/10.jpg",
  precio: 35000,
  color: "Negro",
  grantia: "1 año",
  material: "Poliéster transpirable"
},
// Objeto 33
{
  idProducto: "G78K9mnbG654",
  nombreProducto: "Bolsa para bicicleta",
  selectorCategoria: "ciclismo",
  imagen: "/src/img/3.jpg",
  precio: 40000,
  color: "Negro",
  grantia: "1 año",
  material: "Nylon resistente"
},
// Objeto 34
{
  idProducto: "H78K9mnbG654",
  nombreProducto: "Barra de dominadas",
  selectorCategoria: "gym",
  imagen: "/src/img/5.jpg",
  precio: 90000,
  color: "Negro",
  grantia: "1 año",
  material: "Acero galvanizado"
},
// Objeto 35
{
  idProducto: "I78K9mnbG654",
  nombreProducto: "Tabla de equilibrio",
  selectorCategoria: "gym",
  imagen: "/src/img/5.jpg",
  precio: 55000,
  color: "Madera natural",
  grantia: "1 año",
  material: "Madera de abedul"
},
// Objeto 36
{
  idProducto: "J78K9mnbG654",
  nombreProducto: "Banda de resistencia",
  selectorCategoria: "gym",
  imagen: "/src/img/5.jpg",
  precio: 20000,
  color: "Azul",
  grantia: "1 año",
  material: "Látex de alta resistencia"
},
// Objeto 37
{
  idProducto: "K78K9mnbG654",
  nombreProducto: "Cuerda de escalada",
  selectorCategoria: "escalada",
  imagen: "/src/img/10.jpg",
  precio: 120000,
  color: "Rojo y blanco",
  grantia: "2 años",
  material: "Poliamida y poliéster"
},
// Objeto 38
{
  idProducto: "L78K9mnbG654",
  nombreProducto: "Gorra de natación",
  selectorCategoria: "natacion",
  imagen: "/src/img/10.jpg",
  precio: 15000,
  color: "Negro",
  grantia: "6 meses",
  material: "Silicona resistente al cloro"
},
// Objeto 39
{
  idProducto: "M78K9mnbG655",
  nombreProducto: "Set de golf",
  selectorCategoria: "golf",
  imagen: "/src/img/10.jpg",
  precio: 200000,
  color: "Negro y plateado",
  grantia: "1 año",
  material: "Acero inoxidable y grafito"
},
// Objeto 40
{
  idProducto: "N78K9mnbG654",
  nombreProducto: "Pelota de golf",
  selectorCategoria: "golf",
  imagen: "/src/img/10.jpg",
  precio: 30000,
  color: "Blanco",
  grantia: "6 meses",
  material: "Uretano"
},
// Objeto 41
{
  idProducto: "O78K9mnbG654",
  nombreProducto: "Bañador de competición",
  selectorCategoria: "natacion",
  imagen: "/src/img/10.jpg",
  precio: 80000,
  color: "Negro",
  grantia: "1 año",
  material: "Poliéster y elastano"
},
// Objeto 42
{
  idProducto: "P78K9mnbG654",
  nombreProducto: "Ruedas para patines",
  selectorCategoria: "patinaje",
  imagen: "/src/img/7.jpg",
  precio: 50000,
  color: "Blanco",
  grantia: "6 meses",
  material: "Poliuretano"
},
// Objeto 43
{
  idProducto: "Q78K9mnbG654",
  nombreProducto: "Raqueta de squash",
  selectorCategoria: "squash",
  imagen: "/src/img/10.jpg",
  precio: 120000,
  color: "Negro y amarillo",
  grantia: "1 año",
  material: "Grafito y titanio"
},
// Objeto 44
{
  idProducto: "R78K9mnbG654",
  nombreProducto: "Mochila de senderismo",
  selectorCategoria: "senderismo",
  imagen: "/src/img/10.jpg",
  precio: 90000,
  color: "Gris",
  grantia: "2 años",
  material: "Nylon impermeable"
},
// Objeto 45
{
  idProducto: "S78K9mnbG654",
  nombreProducto: "Set de esquí",
  selectorCategoria: "esqui",
  imagen: "/src/img/10.jpg",
  precio: 400000,
  color: "Rojo y negro",
  grantia: "2 años",
  material: "Fibra de carbono y aluminio"
},
// Objeto 46
{
  idProducto: "T78K9mnbG654",
  nombreProducto: "Sudadera de entrenamiento",
  selectorCategoria: "gym",
  imagen: "/src/img/5.jpg",
  precio: 60000,
  color: "Gris",
  grantia: "1 año",
  material: "Algodón y poliéster"
},
// Objeto 47
{
  idProducto: "U78K9mnbG654",
  nombreProducto: "Red de béisbol",
  selectorCategoria: "beisbol",
  imagen: "/src/img/10.jpg",
  precio: 25000,
  color: "Rojo",
  grantia: "6 meses",
  material: "Nylon resistente"
},
// Objeto 48
{
  idProducto: "V78K9mnbG654",
  nombreProducto: "Pantalones de yoga",
  selectorCategoria: "yoga",
  imagen: "/src/img/10.jpg",
  precio: 35000,
  color: "Negro",
  grantia: "1 año",
  material: "Algodón orgánico"
},
// Objeto 49
{
  idProducto: "W78K9mnbG654",
  nombreProducto: "Set de snorkel",
  selectorCategoria: "natacion",
  imagen: "/src/img/10.jpg",
  precio: 70000,
  color: "Azul y negro",
  grantia: "1 año",
  material: "Silicona y PVC"
},
// Objeto 50
{
  idProducto: "X78K9mnbG654",
  nombreProducto: "Tablero de dardos",
  selectorCategoria: "dardos",
  imagen:"/src/img/10.jpg",
  precio: 40000,
  color: "Verde y negro",
  grantia: "1 año",
  material: "Cerdas de sisal y plástico"
}


];



// funcion para validar el formulario toca validar como dividirla 

function validarRegistro(event) {
  event.preventDefault();
    const idProducto = document.getElementById('idProducto').value;
    const nombreProducto = document.getElementById('nombreProducto').value;
    const selectorCategoria = document.getElementById('selectorCategoria').value;
    const imagen = document.getElementById('imagen').value;
    const precio = document.getElementById('precio').value;
    const color = document.getElementById('color').value;
    const grantia = document.getElementById('grantia').value;
    const material = document.getElementById('material').value;

    const codigoRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d{2,}).{8,}$/;

    // Valida el código
    if (!codigoRegex.test(idProducto)) {
      alert('El código debe tener al menos una mayúscula, una minúscula, dos números y un mínimo de 8 caracteres.');
      window.location.href = '/views/validacion.html';
      return;
    }
    
    const nuevoProducto = {
          idProducto: idProducto,
          nombreProducto: nombreProducto,
          selectorCategoria: selectorCategoria,
          imagen: imagen,
          precio: precio,
          color: color, 
          grantia: grantia, 
          material: material 
      };
    
    
    Registro(nuevoProducto);

  

}

//funcion para registrar  productos 
function Registro(nuevoProducto){
 
  productos.push(nuevoProducto);

  
  //convierto el arreglo a texto  para almacenarlo en el local storage
  const productosString=JSON.stringify(productos);
  // guardamos en el local storage
  localStorage.setItem('productos',productosString);
  window.location.href = '/views/ListaProductos.html';

  
  console.log(productos);





}

let paginaActual = 1;
const productosPagina = 15;

function listar(page) {
    const lista = document.getElementById('listaProductos');
    if (!lista) {
        console.log('El elemento listaProductos no se encuentra en la vista actual');
        return;
    }

    // Llamar todo lo que está almacenado en el local storage 
    let productos = JSON.parse(localStorage.getItem('productos')) || [];
    const start = (page - 1) * productosPagina;
    const end = page * productosPagina;
    const paginatedItems = productos.slice(start, end);

    lista.innerHTML = '';
    paginatedItems.forEach((producto) => {
        lista.innerHTML += `
            <div class="tarjetas"> 
                <img src="${producto.imagen}" alt="${producto.imagen}">
                <p>ID Producto: ${producto.idProducto}</p>
                <p>Nombre: ${producto.nombreProducto}</p>
                <p>Categoria: ${producto.selectorCategoria}</p>
                <p>Imagen: ${producto.imagen}</p>
                <p>Precio: ${producto.precio}</p>
                <p>Color: ${producto.color}</p>
                <p>Grantia: ${producto.grantia}</p>
                <p>Material: ${producto.material}</p>
                <br>
            </div>`;
    });

    actualizarControlesPaginacion(page, productos.length);
}

function actualizarControlesPaginacion(page, totalItems) {
    const pageInfo = document.getElementById('pageInfo');
    const totalPages = Math.ceil(totalItems / productosPagina);

    pageInfo.innerText = `Página ${page} de ${totalPages}`;

    document.getElementById('anterior').disabled = page <= 1;
    document.getElementById('siguiente').disabled = page >= totalPages;
}

function cambiarPagina(incremento) {
    const nuevaPagina = paginaActual + incremento;
    const totalItems = JSON.parse(localStorage.getItem('productos')).length;
    const totalPages = Math.ceil(totalItems / productosPagina);

    if (nuevaPagina >= 1 && nuevaPagina <= totalPages) {
        paginaActual = nuevaPagina;
        listar(paginaActual);
    }
}

document.addEventListener('DOMContentLoaded', function() {
    listar(paginaActual);
});

// Filtro

let paginaActualb = 1;
const productosPorPagina = 10;

function mostrarProductos(productosFiltrados) {
    const tablaResultados = document.getElementById('tablaResultados').getElementsByTagName('tbody')[0];
    tablaResultados.innerHTML = '';

    const inicio = (paginaActualb - 1) * productosPorPagina;
    const fin = inicio + productosPorPagina;
    const productosPagina = productosFiltrados.slice(inicio, fin);

    productosPagina.forEach(producto => {
        const fila = tablaResultados.insertRow();
        fila.insertCell(0).textContent = producto.nombreProducto;
        const imgCell = fila.insertCell(1);
        const img = document.createElement('img');
        img.src = producto.imagen;
        img.alt = producto.nombreProducto;
        img.style.width = "100px";
        imgCell.appendChild(img);
        fila.insertCell(2).textContent = producto.selectorCategoria;
        fila.insertCell(3).textContent = `$${producto.precio}`;
        fila.insertCell(4).textContent = producto.color;
        fila.insertCell(5).textContent = producto.grantia;
        fila.insertCell(6).textContent = producto.material;
    });

    actualizarPaginacion(productosFiltrados.length);
}

function actualizarPaginacion(totalProductos) {
    const pageInfo = document.getElementById('pageInfo');
    const totalPaginas = Math.ceil(totalProductos / productosPorPagina);
    pageInfo.textContent = `Página ${paginaActualb} de ${totalPaginas}`;

    document.getElementById('anteriorF').disabled = paginaActualb === 1;
    document.getElementById('siguiente').disabled = paginaActualb === totalPaginas;
}

function cambiarPaginaFiltro(cambio) {
    paginaActualb += cambio;
    buscarProductos();
}

function buscarProductos() {
    const filtroNombre = document.getElementById('filtroNombre').value.toLowerCase();
    const filtroCategoria = document.getElementById('filtroCategoria').value;
    const filtroPrecio = document.getElementById('filtroPrecio').value;

    let productos = JSON.parse(localStorage.getItem('productos')) || [];
    let productosFiltrados = productos.filter(producto => {
        return (!filtroNombre || producto.nombreProducto.toLowerCase().includes(filtroNombre)) &&
               (!filtroCategoria || producto.selectorCategoria === filtroCategoria) &&
               (!filtroPrecio || producto.precio <= filtroPrecio);
    });

    setTimeout(() => {
        mostrarProductos(productosFiltrados);
    }, 2000); // Simula la carga de datos con un retraso de 2 segundos

    // Muestra el mensaje de carga
    const tablaResultados = document.getElementById('tablaResultados').getElementsByTagName('tbody')[0];
    tablaResultados.innerHTML = '<tr><td colspan="7">Cargando...</td></tr>';
}

function limpiarFiltros() {
    document.getElementById('filtroNombre').value = '';
    document.getElementById('filtroCategoria').value = '';
    document.getElementById('filtroPrecio').value = '';
    paginaActualb = 1;
    mostrarProductos(JSON.parse(localStorage.getItem('productos')) || []);
}

document.addEventListener('DOMContentLoaded', () => {
    mostrarProductos(JSON.parse(localStorage.getItem('productos')) || []);
});


function mostrarAlerta() {
  event.preventDefault();
  alert("Asi se registra de manera correcta ");
  window.location.href = '/index.html';
}


